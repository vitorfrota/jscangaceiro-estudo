{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoService.js"],"names":["HttpService","Negociacao","URL","NegociacaoService","constructor","_http","obterNegociacoesDaSemana","get","then","dados","map","data","quantidade","valor","Date","err","Error","obterNegociacoesDaSemanaAnterior","obterNegociacoesDaSemanaRetrasada","obterNegociacoesDoPeriodo","Promise","all","periodo","reduce","novoArray","item","concat","sort","a","b","getTime","catch","console","log"],"mappings":";;;;;;AAASA,uB,sBAAAA,W;;AACAC,sB,iBAAAA,U;;;;AAET,kBAAMC,MAAM,wBAAZ;;AAEO,kBAAMC,iBAAN,CAAwB;AAC3BC,8BAAa;AACT,yBAAKC,KAAL,GAAa,IAAIL,WAAJ,EAAb;AACH;;AAEDM,2CAA0B;AACtB,2BAAO,KAAKD,KAAL,CAAWE,GAAX,CAAgB,GAAEL,GAAI,oBAAtB,EACNM,IADM,CACDC,SAASA,MAAMC,GAAN,CAAU,CAAC,EAAEC,IAAF,EAAQC,UAAR,EAAoBC,KAApB,EAAD,KAAiC,IAAIZ,UAAJ,CAAe,IAAIa,IAAJ,CAASH,IAAT,CAAf,EAA+BC,UAA/B,EAA2CC,KAA3C,CAA3C,CADR,EAELE,OAAO;AACL,8BAAM,IAAIC,KAAJ,CAAU,wCAAV,CAAN;AACH,qBAJM,CAAP;AAMH;;AAEDC,mDAAkC;AAC9B,2BAAO,KAAKZ,KAAL,CAAWE,GAAX,CAAgB,GAAEL,GAAI,sBAAtB,EACNM,IADM,CACDC,SAASA,MAAMC,GAAN,CAAU,CAAC,EAAEC,IAAF,EAAQC,UAAR,EAAoBC,KAApB,EAAD,KAAiC,IAAIZ,UAAJ,CAAe,IAAIa,IAAJ,CAASH,IAAT,CAAf,EAA+BC,UAA/B,EAA2CC,KAA3C,CAA3C,CADR,EAELE,OAAO;AACL,8BAAM,IAAIC,KAAJ,CAAU,wCAAV,CAAN;AACH,qBAJM,CAAP;AAMH;;AAEDE,oDAAmC;AAC/B,2BAAO,KAAKb,KAAL,CAAWE,GAAX,CAAgB,GAAEL,GAAI,uBAAtB,EACNM,IADM,CACDC,SAASA,MAAMC,GAAN,CAAU,CAAC,EAAEC,IAAF,EAAQC,UAAR,EAAoBC,KAApB,EAAD,KAAiC,IAAIZ,UAAJ,CAAe,IAAIa,IAAJ,CAASH,IAAT,CAAf,EAA+BC,UAA/B,EAA2CC,KAA3C,CAA3C,CADR,EAELE,OAAO;AACL,8BAAM,IAAIC,KAAJ,CAAU,wCAAV,CAAN;AACH,qBAJM,CAAP;AAMH;;AAEDG,4CAA2B;AACvB,2BAAOC,QAAQC,GAAR,CAAY,CACf,KAAKf,wBAAL,EADe,EAEf,KAAKW,gCAAL,EAFe,EAGf,KAAKC,iCAAL,EAHe,CAAZ,EAKNV,IALM,CAKDc,WAAWA,QACZC,MADY,CACL,CAACC,SAAD,EAAYC,IAAZ,KAAoBD,UAAUE,MAAV,CAAiBD,IAAjB,CADf,EACuC,EADvC,EAEZE,IAFY,CAEP,CAACC,CAAD,EAAGC,CAAH,KAAQA,EAAElB,IAAF,CAAOmB,OAAP,KAAmBF,EAAEjB,IAAF,CAAOmB,OAAP,EAFpB,CALV,EAQLC,KARK,CAQChB,OAAO;AACXiB,gCAAQC,GAAR,CAAYlB,GAAZ;AACA,8BAAM,IAAIC,KAAJ,CAAU,mDAAV,CAAN;AACH,qBAXM,CAAP;AAYH;AA7C0B","file":"NegociacaoService.js","sourcesContent":["import { HttpService } from '../../util/HttpService.js'; \r\nimport { Negociacao } from './Negociacao.js';\r\n\r\nconst URL = 'http://localhost:3000/';\r\n\r\nexport class NegociacaoService {\r\n    constructor(){\r\n        this._http = new HttpService();\r\n    }\r\n\r\n    obterNegociacoesDaSemana(){\r\n        return this._http.get(`${URL}negociacoes/semana`)\r\n        .then(dados => dados.map(({ data, quantidade, valor }) => new Negociacao(new Date(data), quantidade, valor))\r\n        , err => {\r\n            throw new Error('Não foi possível obter as negociações!');\r\n        }\r\n        );\r\n    }\r\n\r\n    obterNegociacoesDaSemanaAnterior(){\r\n        return this._http.get(`${URL}negociacoes/anterior`)\r\n        .then(dados => dados.map(({ data, quantidade, valor }) => new Negociacao(new Date(data), quantidade, valor))\r\n        , err => {\r\n            throw new Error('Não foi possível obter as negociações!');\r\n        }\r\n        );\r\n    }\r\n\r\n    obterNegociacoesDaSemanaRetrasada(){\r\n        return this._http.get(`${URL}negociacoes/retrasada`)\r\n        .then(dados => dados.map(({ data, quantidade, valor }) => new Negociacao(new Date(data), quantidade, valor))\r\n        , err => {\r\n            throw new Error('Não foi possível obter as negociações!');\r\n        }\r\n        );\r\n    }\r\n\r\n    obterNegociacoesDoPeriodo(){\r\n        return Promise.all([\r\n            this.obterNegociacoesDaSemana(),\r\n            this.obterNegociacoesDaSemanaAnterior(),\r\n            this.obterNegociacoesDaSemanaRetrasada()\r\n        ])\r\n        .then(periodo => periodo\r\n            .reduce((novoArray, item)=> novoArray.concat(item), [])\r\n            .sort((a,b)=> b.data.getTime() - a.data.getTime())\r\n        ).catch(err => {\r\n            console.log(err);\r\n            throw new Error('Não foi possível obter as negociações do período.');\r\n        })\r\n    }\r\n}"]}